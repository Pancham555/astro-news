---
import { render } from "astro:content";
import BaseLayout from "@/layouts/base.astro";
import ContentLayout from "@/layouts/content.astro";
import ArticleHeader from "./_components/article-header.astro";

import { articlesHandler } from "@/lib/handlers/articles";

import TableWrapper from "./_components/table-wrapper.astro";

export const getStaticPaths = async () => {
  const articles = articlesHandler.allArticles();

  return articles.map((article) => ({
    params: { id: article.id },
    props: { article },
  }));
};
const { article } = Astro.props;

const { Content, remarkPluginFrontmatter } = await render(article);
const componentOverrides = {
    table: TableWrapper,
    // Add any other overrides here if needed (e.g., h2, p, etc.)
};
---

<BaseLayout entry={article}>
  <ArticleHeader
    article={article}
    readingTime={remarkPluginFrontmatter.minutesRead}
  />
  <ContentLayout>
    <Content components={componentOverrides}/>
  </ContentLayout>
</BaseLayout>
